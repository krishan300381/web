<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Room Booking System</title>
    <style>
        body { font-family: sans-serif; margin: 20px; line-height: 1.6; }
        .form-group { margin-bottom: 10px; }
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
        th { background-color: #f2f2f2; }
    </style>
</head>
<body>
    <h1>Room Booking Form</h1>
    <form id="bookingform">
        <div class="form-group">
            <label for="name">NAME:</label>
            <input type="text" id="name">
        </div>
        <div class="form-group">
            <label for="age">Age:</label>
            <input type="number" id="age">
        </div>
        <div class="form-group">
            <label for="date">Date:</label>
            <input type="date" id="date">
        </div>
        <div class="form-group">
            <label for="days">Staying for (days):</label>
            <input type="number" id="days">
        </div>
        <div id="rb_div">
            <p><strong>Select the Room Type:</strong></p>
            <input type="radio" name="room_type" id="single" value="Single">
            <label for="single">Single</label>    
            <input type="radio" name="room_type" id="double" value="Double">
            <label for="double">Double</label>
            <input type="radio" name="room_type" id="sharing" value="Sharing">
            <label for="sharing">Sharing</label>
        </div><br>
        <button type="button" id="submitbtn">Submit</button>
        <button type="button" id="clearbtn">Clear All</button>
    </form>

    <h2>Booking Records</h2>
    <table id="recordsTable">
        <thead>
            <tr>
                <th>Name</th>
                <th>Age</th>
                <th>Date</th>
                <th>Days</th>
                <th>Room Type</th>
            </tr>
        </thead>
        <tbody id="tableBody"></tbody>
    </table>

    <script> 
        class Entry {
            constructor(name, age, days, date, roomtype) {
                this.name = name;
                this.age = age;
                this.days = days;
                this.date = date;
                this.roomtype = roomtype;
            }
        }

        const list1 = JSON.parse(localStorage.getItem("get")) || [];

        const displayData = () => {
            const tbody = document.getElementById("tableBody");
            tbody.innerHTML = "";
            list1.forEach(item => {
                const row = `<tr>
                    <td>${item.name}</td>
                    <td>${item.age}</td>
                    <td>${item.date}</td>
                    <td>${item.days}</td>
                    <td>${item.roomtype}</td>
                </tr>`;
                tbody.innerHTML += row;
            });
        };

        const validate = (name, age, days, date, roomtype) => {
            let errors = [];

            if (!/^[A-Za-z\s]+$/.test(name)) errors.push("Name: Only alphabets allowed.");
            if (isNaN(age) || age < 1) errors.push("Age: Must be a positive integer.");
            if (isNaN(days) || days < 1) errors.push("Days: Must be at least 1.");
            if (!date) errors.push("Date: Mandatory field.");
            if (roomtype === '-1') errors.push("Room Type: Selection mandatory.");

            if (errors.length > 0) {
                alert(errors.join("\n"));
                return false;
            }
            return true;
        };

        document.getElementById("submitbtn").addEventListener('click', () => {
            const name = document.getElementById("name").value.trim();
            const age = parseInt(document.getElementById("age").value);
            const days = parseInt(document.getElementById("days").value);
            const date = document.getElementById("date").value;
            const roomtype = document.querySelector("input[name='room_type']:checked")?.value || '-1';

            if (validate(name, age, days, date, roomtype)) {
                const newEntry = new Entry(name, age, days, date, roomtype);
                list1.push(newEntry);
                localStorage.setItem("get", JSON.stringify(list1));
                alert("Booking saved successfully!");
                document.getElementById("bookingform").reset();
                displayData();
            }
        });

        document.getElementById("clearbtn").addEventListener('click', () => {
            document.getElementById("bookingform").reset();
        });

        // Load data on start
        displayData();
    </script>
</body>
</html>